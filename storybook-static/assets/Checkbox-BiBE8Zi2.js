import{c as y,a as E,u as P,_ as g,e as x,b as h,d as R}from"./Clickable-BApbfUri.js";import{r as l}from"./index-D4H_InIO.js";import{r as _}from"./removeIndexFromArray-Op0ZOHre.js";import{c as A}from"./createEvent-BKVCMz0f.js";var T=["state","setState"],H=[].concat(T,["value","checked"]);function I(a){if(typeof a.checked<"u")return a.checked;if(typeof a.value>"u")return!!a.state;var e=Array.isArray(a.state)?a.state:[];return e.indexOf(a.value)!==-1}function K(a,e){var r=A(a,"change");Object.defineProperties(r,{type:{value:"change"},target:{value:a},currentTarget:{value:a}}),e?.(r)}function N(a,e){l.useEffect(function(){var r=a.current;r&&(e.state==="indeterminate"?r.indeterminate=!0:r.indeterminate&&(r.indeterminate=!1))},[e.state,a])}var j=E({name:"Checkbox",compose:P,keys:H,useOptions:function(e,r){var f=r.value,d=r.checked,i=e.unstable_clickOnEnter,s=i===void 0?!1:i,u=g(e,["unstable_clickOnEnter"]);return h({unstable_clickOnEnter:s,value:f,checked:I(h({checked:d},u))},u)},useProps:function(e,r){var f=r.ref,d=r.onChange,i=r.onClick,s=g(r,["ref","onChange","onClick"]),u=l.useRef(null),m=l.useState(!0),c=m[0],O=m[1],C=x(d),o=x(i);l.useEffect(function(){var t=u.current;t&&(t.tagName!=="INPUT"||t.type!=="checkbox")&&O(!1)},[]),N(u,e);var v=l.useCallback(function(t){var n=t.currentTarget;if(e.disabled){t.stopPropagation(),t.preventDefault();return}if(C.current&&(c||(n.checked=!n.checked),C.current(t)),!!e.setState)if(typeof e.value>"u")e.setState(!e.checked);else{var k=Array.isArray(e.state)?e.state:[],b=k.indexOf(e.value);b===-1?e.setState([].concat(k,[e.value])):e.setState(_(k,b))}},[e.disabled,c,e.setState,e.value,e.checked,e.state]),S=l.useCallback(function(t){var n;(n=o.current)===null||n===void 0||n.call(o,t),!t.defaultPrevented&&(c||K(t.currentTarget,v))},[c,v]);return h({ref:R(u,f),role:c?void 0:"checkbox",type:c?"checkbox":void 0,value:c?e.value:void 0,checked:e.checked,"aria-checked":e.state==="indeterminate"?"mixed":e.checked,onChange:v,onClick:S},s)}}),X=y({as:"input",memo:!0,useHook:j});export{X as C};
